# 多維度搜尋與過濾功能使用指南

## 功能概述

多維度搜尋與過濾系統為 RAG Store 提供了強大的文件檢索能力，支援多種搜尋模式和過濾條件的組合使用。

## 🔍 搜尋模式

### 1. 語義搜尋 (Semantic Search)
- **描述**: 基於文件內容的語義理解進行搜尋
- **適用情況**: 查找相關主題或概念的文件
- **優點**: 能理解查詢意圖，找到語義相關的內容
- **範例**: 搜尋"醫療費用"能找到包含"診療費"、"醫院支出"等相關文件

### 2. 條件過濾 (Filter Search)
- **描述**: 基於文件元資料進行精確過濾
- **適用情況**: 需要精確條件匹配的搜尋
- **優點**: 快速、準確，適合結構化查詢
- **範例**: 查找 2025年1月的所有帳單

### 3. 混合模式 (Hybrid Search)
- **描述**: 結合語義搜尋和條件過濾
- **適用情況**: 大多數搜尋需求
- **優點**: 兼顧語義理解和精確過濾
- **範例**: 搜尋"電費"並限制在"帳單"分類中

## 🎯 過濾條件

### 文件分類過濾
- **功能**: 按預定義的文件類型過濾
- **可用分類**: 帳單、收據、成績單、健康記錄、保險文件等
- **使用方式**: 下拉選單選擇分類

### 標籤過濾
- **功能**: 按標籤組合篩選文件
- **支援**: 多標籤選擇（AND 邏輯）
- **標籤類型**: 重要、緊急、待處理、已完成等

### 家庭成員過濾
- **功能**: 按文件所屬家庭成員過濾
- **用途**: 查找特定成員的相關文件
- **範例**: 查看父親的醫療記錄

### 日期範圍過濾
- **功能**: 按文件日期範圍篩選
- **支援**: 開始日期和結束日期
- **格式**: YYYY-MM-DD

### 金額範圍過濾
- **功能**: 按提取的金額範圍篩選
- **用途**: 查找特定金額區間的財務文件
- **範例**: 查找 1000-5000 元的支出記錄

## 🚀 使用方法

### 基本搜尋（聊天頁面）
1. 進入聊天頁面 (`/chat`)
2. 直接輸入查詢文字
3. 系統使用預設混合模式搜尋
4. 查看搜尋結果和來源文件

### 進階搜尋（專門頁面）
1. 進入進階搜尋頁面 (`/search`)
2. 輸入基本查詢文字
3. 選擇搜尋模式
4. 設定所需的過濾條件
5. 點擊"搜尋"按鈕
6. 查看詳細搜尋結果和統計資訊

## 📊 搜尋結果

### 結果資訊
- **文件片段**: 相關的文字內容
- **相似度分數**: 語義搜尋的相關程度
- **文件元資料**: 檔名、分類、日期、金額等
- **來源標識**: 原始文件識別

### 統計資訊
- **總結果數**: 找到的文件片段數量
- **分類數量**: 涉及的文件分類數
- **日期範圍**: 結果中的最早和最晚日期
- **金額範圍**: 結果中的最小和最大金額

## 🎛️ API 端點

### 基本查詢
```
POST /api/query
```
支援多維度搜尋參數的查詢端點

### 進階搜尋
```
POST /api/search/advanced
```
返回詳細結果和統計資訊的搜尋端點

### 搜尋過濾器
```
GET /api/search/filters
```
取得所有可用的過濾器選項

### 搜尋建議
```
GET /api/search/suggestions?q={query}
```
根據查詢文字提供搜尋建議

## 💡 使用技巧

### 提升搜尋效果
1. **組合使用**: 結合多個過濾條件提高精確度
2. **適當選擇搜尋模式**: 
   - 概念搜尋用語義模式
   - 精確查找用過濾模式
   - 一般查詢用混合模式
3. **利用標籤**: 為文件添加有意義的標籤
4. **日期範圍**: 縮小時間範圍提高搜尋速度

### 常見搜尋場景
- **財務查詢**: "電費" + 分類:帳單 + 日期範圍
- **醫療記錄**: "健康檢查" + 家庭成員:父親
- **教育文件**: "成績" + 分類:成績單 + 標籤:重要
- **保險相關**: "理賠" + 分類:保險文件

## 🔧 疑難排解

### 常見問題
1. **搜尋結果太多**: 增加過濾條件或縮小日期範圍
2. **搜尋結果太少**: 減少過濾條件或使用語義搜尋模式
3. **搜尋速度慢**: 避免過於寬泛的條件組合

### 效能建議
- 優先使用過濾條件縮小搜尋範圍
- 避免同時使用過多標籤
- 設定適當的結果數量限制

## 📈 未來功能
- 搜尋歷史記錄
- 個人化搜尋建議
- 搜尋結果排序自定義
- 搜尋結果匯出功能
